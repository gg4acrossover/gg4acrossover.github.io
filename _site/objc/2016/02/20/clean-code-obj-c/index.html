<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>CODE SạCH, CODE KHô THOáNG &vert; GG4ACROSSOVER</title>
<meta name="description" content="IOS and Life">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/logo.png">
<meta name="twitter:title" content="code sạch, code khô thoáng">
<meta name="twitter:description" content="IOS and Life">
<meta name="twitter:creator" content="@viet142">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="code sạch, code khô thoáng">
<meta property="og:description" content="IOS and Life">
<meta property="og:url" content="/objc/2016/02/20/clean-code-obj-c/">
<meta property="og:site_name" content="GG4aCrossover">
<meta property="og:image" content="/images/">





<link rel="canonical" href="/objc/2016/02/20/clean-code-obj-c/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="GG4aCrossover Feed">
<link rel="author" href="?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,600,300,800,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/assets/css/vendor/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/vendor/normalize.css">
    <link rel="stylesheet" href="/assets/css/vendor/nprogress.css">
    <link rel="stylesheet" href="/assets/css/vendor/foundation.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/post.css">





<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

<style type="text/css">@media only screen and (min-width:43.75em){.notepad-post-content div>p:first-child:first-letter{float:left;font-size:4.688rem;line-height:4.375rem;padding-top:.25rem;padding-right:.5rem;padding-left:.188rem;font-family:serif}}</style>
</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

        <main id="notepad-post-container-simple" class="notepad-post-container-simple" role="main">
            <header class="notepad-post-header-simple">
                <div class="notepad-post-menu-header-simple">

                    <a class="notepad-blog-logo" href="">
                        <img src="/images/logo.png" alt="Blog Logo" />
                    </a>

                <div class="notepad-blog-menu">      
    <div class="notepad-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="notepad-menu">
        <li class="notepad-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="/">Home</a>
                 </li>

            <li>
                    <a href="/categories">Categories</a>
                 </li>

            <li>
                    <a href="/about">About</a>
                 </li>
            
           <li><a href="/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
    </ul>

</div>
            </div>

                <div class="notepad-post-title-simple row">
                    <div class="small-12 columns">
                        <div class="notepad-post-meta-simple">
                            <h1>code sạch, code khô thoáng</h1>
                            <p>by <strong>GG4aCrossover</strong> &#8212;  <strong><time datetime="2016-02-20T01:54:53+05:30">20 Feb 2016</time></strong></p>
                        </div>
                    </div>
                </div>
            </header>

        <article class="notepad-post-content post tag-simple">
            <div><p>Đây là một số phương pháp khi tớ làm việc với obj c. Với mỗi người, tổ chức có thể khác, thế nên cái này chỉ mang tính tham khảo. <img class="emoji" title=":smile:" alt=":smile:" src="https://assets.github.com/images/icons/emoji/unicode/1f604.png" height="20" width="20" align="absmiddle" /></p>

<h1 id="s-dng-immutable">Sử dụng immutable</h1>

<p>Đối với array hay dictionary nếu không cần sử dụng mutable thì ta nên viết như sau:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">	<span class="n">NSArray</span> <span class="o">*</span><span class="n">pFruit</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="err">@</span><span class="s">"orange"</span><span class="p">,</span> <span class="err">@</span><span class="s">"apple"</span><span class="p">,</span> <span class="err">@</span><span class="s">"lemon"</span><span class="p">,</span> <span class="err">@</span><span class="s">"strawberry"</span><span class="p">];</span>
	<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">pDict</span> <span class="o">=</span> <span class="err">@</span><span class="p">{</span> <span class="err">@</span><span class="s">"name"</span> <span class="o">:</span> <span class="err">@</span><span class="s">"Tom"</span><span class="p">,</span>  <span class="err">@</span><span class="s">"age"</span> <span class="o">:</span> <span class="err">@</span><span class="mi">18</span><span class="p">};</span></code></pre></figure>

<p>Thay vì viết:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">	<span class="n">NSArray</span> <span class="o">*</span><span class="n">pFruit</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSArray</span> <span class="n">arrayWithObjects</span><span class="o">:</span><span class="err">@</span><span class="s">"orange"</span><span class="p">,</span> <span class="err">@</span><span class="s">"apple"</span><span class="p">,</span> <span class="err">@</span><span class="s">"lemon"</span><span class="p">,</span> <span class="err">@</span><span class="s">"strawberry"</span><span class="p">,</span> <span class="n">nil</span><span class="p">];</span>
	<span class="n">NSDictionary</span> <span class="o">*</span><span class="n">pDict2</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSDictionary</span> <span class="n">dictionaryWithObjectsAndKeys</span><span class="o">:</span><span class="err">@</span><span class="s">"value1"</span><span class="p">,</span><span class="err">@</span><span class="s">"key1"</span><span class="p">,</span><span class="err">@</span><span class="s">"value2"</span><span class="p">,</span> <span class="err">@</span><span class="s">"key2"</span><span class="p">,</span> <span class="n">nil</span><span class="p">];</span></code></pre></figure>

<p>Như thế code nhìn trông gọn và dễ đọc hơn, đối với các biến dạng số hoặc bool được đưa vào trong dictionary để gửi lên server ta cũng nên làm như vậy.</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">	<span class="n">NSNumber</span> <span class="o">*</span><span class="n">pIsNew</span> <span class="o">=</span> <span class="err">@</span><span class="n">YES</span><span class="p">;</span></code></pre></figure>

<p>Thay vì</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">	<span class="n">NSNumber</span> <span class="o">*</span><span class="n">pIsNew</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSNumber</span> <span class="n">numberWithBool</span><span class="o">:</span><span class="n">YES</span><span class="p">];</span></code></pre></figure>

<p>Sử dụng category</p>

<p>Frame được sử dụng nhiều khi viết code iOS, ta có thể tạo ra một file chứa các c function chuyên làm việc với frame, hay tạo ra một macro. Ví dụ như muốn lấy originX của 1 uiview:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">	<span class="n">CGFloat</span> <span class="nf">ORIGIN_X</span><span class="p">(</span> <span class="n">CGRect</span> <span class="n">rec</span><span class="p">)</span>
	<span class="p">{</span>
            <span class="k">return</span> <span class="n">rec</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
	<span class="p">}</span></code></pre></figure>

<p>Hoặc ngắn hơn với macro</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#define posX(v)                  v.frame.origin.x</span></code></pre></figure>

<p>Tuy nhiên sử dụng category cũng là một lựa chọn thời thượng. Giả sử bạn có thể lấy originX bằng cách sau:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">CGFloat</span> <span class="n">originX</span> <span class="o">=</span> <span class="p">[</span><span class="n">PopUpView</span> <span class="n">getX</span><span class="p">];</span></code></pre></figure>

<p>Khá ngắn gọn, clear, dễ chỉnh sửa. Category còn đặc biệt với những ai hay gửi nhận dữ liệu lên server, đôi khi dictionary sẽ trả về một cái object null. Việc check null ở nhiều chỗ khác nhau khá là tốn thời gian nếu cứ phải viết đi viết lại như thế này</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">if</span><span class="p">(</span><span class="n">dict</span><span class="p">[</span><span class="err">@</span><span class="s">"key"</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">[</span><span class="n">dict</span><span class="p">[</span><span class="err">@</span><span class="s">"key"</span><span class="p">]</span> <span class="n">isEqual</span><span class="o">:</span> <span class="p">[</span><span class="n">NSNull</span> <span class="n">null</span><span class="p">]])</span></code></pre></figure>

<p>Ta có thể đưa vào category theo cách sau</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="o">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">safeValueForKey</span><span class="o">:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">key</span> <span class="p">{</span>
    <span class="n">id</span> <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="n">valueForKey</span><span class="o">:</span><span class="n">key</span><span class="p">];</span>
     
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">[</span><span class="n">value</span> <span class="n">isEqual</span><span class="o">:</span> <span class="p">[</span><span class="n">NSNull</span> <span class="n">null</span><span class="p">]])</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>
     
    <span class="k">return</span> <span class="n">nil</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Sau đó ở tất cả mọi nơi chỉ cần gọi</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">NSString</span> <span class="o">*</span><span class="n">pValue</span> <span class="o">=</span> <span class="p">[</span><span class="n">dict</span> <span class="n">safeValueForKey</span><span class="o">:</span> <span class="err">@</span><span class="s">"key"</span><span class="p">];</span></code></pre></figure>

<h1 id="s-dng-block">Sử dụng block</h1>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">UIView</span> <span class="o">*</span><span class="n">pCircle2</span> <span class="o">=</span> <span class="p">({</span>
	<span class="no">UIView</span> <span class="o">*</span><span class="n">pView</span> <span class="o">=</span> <span class="p">[[</span><span class="no">UIView</span> <span class="n">alloc</span><span class="p">]</span>
					<span class="n">initWithFrame</span><span class="ss">:CGRectMake</span><span class="p">(</span><span class="mi">80</span><span class="o">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">80</span><span class="o">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">90</span><span class="o">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">90</span><span class="o">.</span><span class="mi">0</span><span class="n">f</span><span class="p">)];</span>
	<span class="n">pView</span><span class="p">.</span><span class="nf">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="no">UIColor</span> <span class="n">redColor</span><span class="p">];</span>
	<span class="no">CAShapeLayer</span> <span class="o">*</span><span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="no">CAShapeLayer</span> <span class="n">layer</span><span class="p">];</span>
	<span class="no">CGFloat</span> <span class="n">r</span> <span class="o">=</span> <span class="no">CGRectGetWidth</span><span class="p">(</span><span class="n">pView</span><span class="p">.</span><span class="nf">frame</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="n">f</span><span class="p">;</span>
	<span class="no">CGPoint</span> <span class="n">center</span> <span class="o">=</span> <span class="no">CGPointMake</span><span class="p">(</span> <span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
	<span class="no">UIBezierPath</span> <span class="o">*</span><span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="no">UIBezierPath</span> <span class="n">bezierPathWithArcCenter</span><span class="ss">:center</span>
							    <span class="n">radius</span><span class="ss">:r</span>
							<span class="n">startAngle</span><span class="p">:</span><span class="mi">0</span>
							  <span class="n">endAngle</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="no">M_PI</span>
							 <span class="n">clockwise</span><span class="ss">:YES</span><span class="p">];</span>
	<span class="n">shape</span><span class="p">.</span><span class="nf">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="no">CGPath</span><span class="p">;</span>
	<span class="n">pView</span><span class="p">.</span><span class="nf">layer</span><span class="p">.</span><span class="nf">mask</span> <span class="o">=</span> <span class="n">shape</span><span class="p">;</span>
	<span class="n">pView</span><span class="p">;</span>
<span class="p">});</span></code></pre></figure>

<p>Gộp các đoạn code sử dụng chung cho một mục đích vào trong 1 block, với cách này thì giá trị return tương ứng với dòng cuối trong block.</p>

<h1 id="cch-t-tn">cách đặt tên</h1>

<p>Nhiều tài liệu của apple cũng có nói về cách đặt tên. Mọi người hãy chú ý delegate của uitableview hay uicollectionview sẽ thấy có nhiều điểm tương đồng trong cách đặt tên hàm.
Ví dụ guide của apple <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF">datten</a></p>

<p>Từ cách đặt tên trên ta có thể tạo ra enum như sau</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="n">NSUInteger</span><span class="p">,</span> <span class="n">GGAnimationViewType</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">GGAnimationViewTypeFadeIn</span><span class="p">,</span>
    <span class="n">GGAnimationViewTypeFadeOut</span><span class="p">,</span>
    <span class="n">GGAnimationViewTypeEaseIn</span><span class="p">,</span>
    <span class="n">GGAnimationViewTypeEaseOut</span>
<span class="p">};</span></code></pre></figure>

<p>Công thức chung là [tên class][tên enum], cụ thể như ví dụ trên [GGAnimationView][Type].
Các giá trị enum [tên class][tên enum][các giá trị]. Các giá trị FadeIn, FadeOut,….</p>

<p>Tóm lại là code càng ngắn gọn càng dễ hiểu, trừ cách đặt tên biến ra :v.</p>

            </div>
        </article>
        <div class="cf"></div>
        <div class="row text-center">
            <section class="notepad-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;code sạch, code khô thoáng&quot;%20/objc/2016/02/20/clean-code-obj-c/%20via%20&#64;viet142"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=/objc/2016/02/20/clean-code-obj-c/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=/objc/2016/02/20/clean-code-obj-c/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
        <div class="cf"></div>
        
            <div class="notepad-author-info">
                <div class="row">
                    <section class="notepad-post-author small-12 columns">
                        
                            <img src="/images/profile.png" class="notepad-post-author-avatar" alt="GG4aCrossover's photo">
                        
                        
                            <span class="author-label">Author</span>
                            <h1>GG4aCrossover</h1>
                        
                        
                            <p><a href="mailto:hoangquocviet1402@gmail.com" class="author-website">hoangquocviet1402@gmail.com</a>

			    
			    </p>
                        
                        
                            <p>Coder nhân dân, thi thoảng viết về IOS và những điều thú vị khác nữa.</p>
                        
                    </section>
                </div>
            </div>
 
        
        <div class="cf"></div>
        
        <div class="cf"></div>

    <footer class="notepad-site-footer">
    <div class="copyright">
        <section>All content copyright <a href="/about">GG4aCrossover</a> &copy; 2016 &bull; All rights reserved.</section>
	<p><a href='http://www.catb.org/hacker-emblem/' target="_blank"><img src='/assets/img/hacker.png' alt='hacker emblem' /></a>
          <a href="http://endsoftpatents.org/innovating-without-patents" target="_blank"><img style="border-width:0" src="/assets/img/patent-free.png"></a></p>
    </div>
    <div class="social-icons">
        
        
        <a href="http://twitter.com/viet142">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
            </span>
        </a>
        
        
        <a href="">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-google-plus fa-stack-1x"></i>
            </span>
        </a>
        
        
        
        
    </div>
    
    <div class="cf"></div>
</footer>
 
</main>    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
    <script src="/assets/js/vendor/modernizr.js"></script>
    <script src="/assets/js/foundation.min.js"></script>
    
    <script src="/assets/js/notepad.js"></script>
    <script src="/assets/js/scripts.min.js"></script>
    <script src="/assets/js/vendor/nprogress.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/sigma.js/1.0.3/sigma.min.js"></script>

    <script>
      $(document).foundation();
    </script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

<script>NProgress.start();var interval=setInterval(function(){NProgress.inc()},1000);jQuery(window).load(function(){clearInterval(interval);NProgress.done()});jQuery(window).unload(function(){NProgress.start()});</script>
 
</body>
</html>
